---
import Rehab1 from "../../assets/images/Service/Rehabilitation/Rehab1.webp";
import Rehab2 from "../../assets/images/Service/Rehabilitation/Rehab2.webp";
import Image from "astro/components/Image.astro";
---

<section
  class="w-full flex 2 mt-10 md:mt-20 flex-col items-center justify-center gap-4 bg-gray-100"
  data-tabs
>
  <div
    class="flex flex-col items-center justify-center gap-4 mt-8 max-w-7xl w-full"
  >
    <div class="flex items-center justify-around w-full gap-4 px-8 md:px-52">
      <button
        class="text-xl md:text-2xl tab-button-1 py-2 md:px-4 font-bold focus:outline-none"
        data-tab="tab1"
        aria-selected="true"
      >
        Asphalt Plants
      </button>
      <button
        class="tab-button-1 py-2 md:px-4 font-bold text-xl md:text-2xl focus:outline-none"
        data-tab="tab2"
        aria-selected="false"
      >
        Rock Crushers
      </button>
    </div>
    <div class="py-4 w-full">
      <!-- First Section -->
      <div
        class="w-full flex flex-col items-center justify-center gap-4 mt-4 tab-content-1 text-base md:text-lg text-grisT font-bold"
        data-tab-content="tab1"
      >
        <div class="w-full px-8">
          <Image src={Rehab1} alt="" />
        </div>
      </div>
      <!-- Second Section -->
      <div
        class="w-full flex flex-col items-center justify-center gap-10 mt-4 tab-content-1 text-base md:text-lg text-grisT font-bold"
        data-tab-content="tab2"
      >
        <div class="w-full px-8">
          <Image src={Rehab2} alt="" />
        </div>
      </div>
    </div>
  </div>
</section>
<style is:inline>
  /* Estilos para los tabs activos */
  .tab-button-1[aria-selected="true"] {
    color: var(--rojo-btn);
    border-bottom: 2px solid var(--rojo-btn);
  }

  .tab-button-1[aria-selected="false"] {
    color: var(--gris-titulos);
    border-bottom: 2px solid var(--gris-titulos);
  }

  .tab-button-1:hover:not([aria-selected="true"]) {
    color: var(--rojo-btn);
    border-bottom: 2px solid var(--rojo-btn);
  }
</style>
<script is:inline>
  (function initTabs() {
    document.querySelectorAll("section[data-tabs]").forEach((tabSection) => {
      const tabButtons = tabSection.querySelectorAll(".tab-button-1");
      const tabContents = tabSection.querySelectorAll(".tab-content-1");

      // Ocultar todos menos el primero
      const selectedTab = tabSection.querySelector(
        '.tab-button-1[aria-selected="true"]'
      );
      const selectedTabId = selectedTab?.getAttribute("data-tab");

      tabContents.forEach((content) => {
        const contentTabId = content.getAttribute("data-tab-content");
        content.classList.toggle("hidden", contentTabId !== selectedTabId);
      });

      tabButtons.forEach((button) => {
        button.addEventListener("click", () => {
          const tabId = button.getAttribute("data-tab");

          tabButtons.forEach((btn) =>
            btn.setAttribute("aria-selected", "false")
          );
          button.setAttribute("aria-selected", "true");

          tabContents.forEach((content) => {
            content.classList.add("hidden");
          });

          const activeContent = tabSection.querySelector(
            `.tab-content-1[data-tab-content="${tabId}"]`
          );
          if (activeContent) activeContent.classList.remove("hidden");
        });
      });
    });
  })();
</script>
