---
export interface Props {
  /** Texto del botón */
  buttonText?: string;
  /** URL de la imagen en la modal */
  imgSrc?: string;
  /** Alt de la imagen */
  imgAlt?: string;
  /** Título para la modal (si no usas slot "title") */
  title?: string;
  /** Contenido (si no usas slot "content") */
  content?: string;
}

const {
  buttonText = "Ver más",
  imgSrc = "https://picsum.photos/seed/astro/800/450",
  imgAlt = "Imagen de ejemplo",
  title = "Título de ejemplo",
  content = "Este es el contenido de la modal. Puedes pasar props o usar slots para personalizarlo.",
} = Astro.props as Props;
---


<div class="inline-block" data-modal-root>
  <button
    type="button"
    class="inline-flex items-center bg-[#14427c] gap-2 rounded-lg px-5 py-2 hover:bg-[#2a67b1] transition active:scale-[0.99] text-white"
    data-open
    aria-haspopup="dialog"
    onclick="this.closest('[data-modal-root]').querySelector('dialog').showModal()"
  >
  See more
    
  </button>

  <dialog
    class="backdrop:bg-black/50 rounded-2xl p-0 w-[min(92vw,44rem)]"
    role="dialog"
    aria-labelledby="modal-title"
    aria-modal="true"
    onclick="if (event.target === this) this.close()"
  >
    <div class="bg-white rounded-2xl overflow-hidden">
      <!-- Imagen -->
      <div class="relative aspect-[16/9] flex justify-center items-center bg-gray-100">
        <slot name="image">
          <img
            src={imgSrc}
            alt={imgAlt}
            class="absolute inset-0 w-full object-cover"
            loading="lazy"
          />
        </slot>
        <button
          type="button"
          class="absolute right-3 top-3 text-base inline-flex h-9 w-9 items-center justify-center rounded-lg bg-white/90 ring-1 ring-black/10 hover:bg-white"
          title="Cerrar"
          aria-label="Cerrar"
          data-close
          onclick="this.closest('dialog')?.close()"
        >
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="h-5 w-5">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6 6l12 12M18 6L6 18"/>
          </svg>
        </button>
      </div>

      <!-- Cuerpo -->
      <div class="p-5 md:p-6">
        <div class="mb-2">
          <slot name="title">
            <h3 id="modal-title" class="text-xl md:text-2xl font-bold text-black">{title}</h3>
          </slot>
        </div>
        <div class="prose prose-sm max-w-none text-gray-700">
          <slot name="content">{content}</slot>
        </div>
        <div class="mt-5 flex justify-end gap-2">
          <button
            type="button"
            class="inline-flex items-center gap-2 rounded-xl px-4 py-2 ring-1 ring-black hover:shadow-sm bg-gray-50"
            data-close
            onclick="this.closest('dialog')?.close()"
          >
            Cerrar
          </button>
        </div>
      </div>
    </div>
  </dialog>
</div>
